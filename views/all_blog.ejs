<!-- Include the admin header -->
<%- include('./layout/admin_header.ejs') %>

  <div class="container overflow-hidden">
    <div class="row">
      <div class="col-lg-12 my-3">
        <% if (message) { %>
          <div class="alert d-flex justify-content-between alert-dismissible fade show alert-<%= message.type %>"
            role="alert">
            <strong>
              <%= message.message %>
            </strong>
            <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          <% } %>
            <div style="overflow-x: auto;">
              <!-- Table with dynamic blog data -->
              <table class="table table-bordered table-hover text-center align-middle">
                <thead class="text-white table-dark">
                  <tr>
                    <th>ID</th>
                    <th>Image</th>
                    <th>Blog Title</th>
                    <th>Description</th>
                    <th>Created At</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Loop through blogs and display each -->
                  <% blogs.forEach((blog, index)=> { %>
                    <tr>
                      <td>
                        <%= index + 1 %>
                      </td>
                      <td>
                        <img src="/uploads/<%= blog.blogImage %>" alt="Blog Image" class="img-thumbnail"
                          style="width: 50px; height: 50px" />
                      </td>
                      <td>
                        <%= blog.title %>
                      </td>
                      <td class="text-truncate" style="max-width: 200px">
                        <%= blog.description %>
                      </td>
                      <!-- Display the formatted creation date -->
                      <td>
                        <%= new Date(blog.created).toLocaleDateString() %>
                      </td>
                      <td>
                        <a href="/admin/updateBlog/<%= blog._id %>" class="btn btn-success btn-sm">
                          <i class="fas fa-edit"></i>
                        </a>
                        <a href="/admin/deleteBlog/<%= blog._id %>" class="btn btn-danger btn-sm">
                          <i class="fas fa-trash"></i>
                        </a>
                      </td>
                    </tr>
                    <% }) %>
                </tbody>
              </table>
            </div>
      </div>
    </div>
  </div>

  <%- include("./layout/admin_footer.ejs") %>